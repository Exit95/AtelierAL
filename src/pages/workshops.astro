---
import Layout from "../layouts/Layout.astro";
import WorkshopCard from "../components/WorkshopCard.astro";
import { getItems, type Workshop } from "../lib/storage";

const allWorkshops = await getItems<Workshop>("workshops");

// Separate upcoming and past workshops
const now = new Date();
const upcomingWorkshops = allWorkshops
    .filter((w) => new Date(w.date) >= now)
    .sort((a, b) => new Date(a.date).getTime() - new Date(b.date).getTime());

const pastWorkshops = allWorkshops
    .filter((w) => new Date(w.date) < now)
    .sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());
---

<Layout
    title="Workshops"
    description="Kreative Mal-Workshops bei ATELIER KL in Heek. Entdecken Sie Ihre künstlerische Seite in kleinen Gruppen mit persönlicher Betreuung."
>
    <!-- Hero Section -->
    <section class="page-hero dark-section">
        <div class="container">
            <h1 class="hero-title handwriting">Workshops</h1>
            <p class="hero-subtitle">
                Entdecke deine kreative Seite! In meinen Workshops lernst du, wie du Farben, Formen und Techniken einsetzt, um deine eigene Kunst zu erschaffen. Ob Anfänger oder Fortgeschrittener – jeder ist willkommen!
            </p>
        </div>
    </section>

    <!-- Info Boxes Section -->
    <section class="info-section dark-section">
        <div class="container">
            <div class="info-grid">
                <!-- Was dich erwartet Box -->
                <div class="info-box">
                    <h3 class="info-title handwriting">Was dich erwartet:</h3>
                    <ul class="info-list">
                        <li>Grundlagen der Malerei: von Skizzen bis hin zu Farbkompositionen</li>
                        <li>Technik: Experimentiere mit Acrylfarben</li>
                        <li>Kreativität: Schaffe ein eigenes Kunstwerk in kreativer Atmosphäre.</li>
                    </ul>
                </div>

                <!-- Details Box -->
                <div class="info-box">
                    <h3 class="info-title handwriting">Details:</h3>
                    <p class="info-detail"><strong>Dauer:</strong> 2,5 - 3 Stunden</p>
                    <p class="info-detail"><strong>Material:</strong> Alles wird bereitgestellt – du brauchst nur deine Kreativität!</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Interest Section -->
    <section class="interest-section dark-section">
        <div class="container">
            <h2 class="interest-title">INTERESSE?</h2>
            <p class="interest-text handwriting">
                Schreibe mir eine Nachricht. Aktuelle Termine findest du weiter unten!
            </p>
            <p class="interest-text handwriting">
                Ich freue mich, mit dir zu arbeiten!
            </p>
        </div>
    </section>

    <!-- Upcoming Workshops -->
    <section class="section py-16 bg-light">
        <div class="container">
            <h2 class="section-title">Kommende Workshops</h2>

            {
                upcomingWorkshops.length > 0 ? (
                    <div class="grid grid-cols-1 grid-cols-md-3">
                        {upcomingWorkshops.map((workshop) => (
                            <WorkshopCard workshop={workshop} />
                        ))}
                    </div>
                ) : (
                    <p class="text-center text-secondary">
                        Aktuell sind keine Workshops geplant. Schauen Sie bald
                        wieder vorbei oder
                        <a href="/kontakt">kontaktieren Sie mich</a> für private
                        Workshop-Anfragen.
                    </p>
                )
            }
        </div>
    </section>

    <!-- Past Workshops (if any) -->
    {
        pastWorkshops.length > 0 && (
            <section class="section py-16">
                <div class="container">
                    <h2 class="section-title">Vergangene Workshops</h2>
                    <div class="grid grid-cols-1 grid-cols-md-3">
                        {pastWorkshops.slice(0, 3).map((workshop) => (
                            <WorkshopCard
                                workshop={{
                                    ...workshop,
                                    bookingEnabled: false,
                                }}
                            />
                        ))}
                    </div>
                </div>
            </section>
        )
    }
</Layout>

<style>
    .dark-section {
        background-color: var(--color-dark);
        color: var(--color-text-light);
    }

    .bg-light {
        background-color: var(--color-surface);
    }

    /* Hero Section */
    .page-hero {
        padding: var(--space-16) 0 var(--space-8);
        text-align: center;
    }

    .hero-title.handwriting {
        font-family: 'Manrope', sans-serif;
        font-size: clamp(2.5rem, 5vw, 4rem);
        font-weight: 600;
        line-height: 1.1;
        margin-bottom: var(--space-6);
        color: var(--color-light);
        text-transform: uppercase;
        letter-spacing: 0.05em;
    }

    .hero-subtitle {
        font-size: var(--font-size-base);
        color: var(--color-light);
        max-width: 800px;
        margin: 0 auto;
        line-height: 1.7;
    }

    /* Info Section */
    .info-section {
        padding: var(--space-8) 0;
    }

    .info-grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: var(--space-6);
    }

    @media (min-width: 768px) {
        .info-grid {
            grid-template-columns: 1.5fr 1fr;
            gap: var(--space-8);
        }
    }

    .info-box {
        background-color: var(--color-surface);
        padding: var(--space-6);
        border-radius: var(--radius-base);
    }

    .info-title.handwriting {
        font-family: 'Dancing Script', cursive;
        font-size: clamp(1.5rem, 2.5vw, 2rem);
        font-weight: 500;
        color: var(--color-dark);
        margin-bottom: var(--space-4);
    }

    .info-list {
        list-style: disc;
        padding-left: var(--space-5);
        color: var(--color-text-primary);
        font-size: var(--font-size-sm);
        line-height: 1.8;
    }

    .info-list li {
        margin-bottom: var(--space-2);
    }

    .info-detail {
        font-size: var(--font-size-sm);
        color: var(--color-text-primary);
        line-height: 1.7;
        margin-bottom: var(--space-2);
    }

    .info-detail strong {
        color: var(--color-dark);
    }

    /* Interest Section */
    .interest-section {
        padding: var(--space-12) 0;
    }

    .interest-title {
        font-family: var(--font-sans);
        font-size: var(--font-size-sm);
        font-weight: 600;
        letter-spacing: 0.15em;
        color: var(--color-light);
        margin-bottom: var(--space-2);
        font-style: italic;
    }

    .interest-text.handwriting {
        font-family: 'Dancing Script', cursive;
        font-size: clamp(1.25rem, 2.5vw, 1.75rem);
        font-weight: 500;
        color: var(--color-light);
        line-height: 1.4;
        margin-bottom: var(--space-1);
    }

    /* Section Title */
    .section-title {
        text-align: center;
        margin-bottom: var(--space-12);
    }
</style>
